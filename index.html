<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROBRO // LOCK IN</title>
    <style>
        :root {
            --bg: #050505;
            --card: #0d0d0d;
            --accent: #a855f7;
            --accent-glow: rgba(168, 85, 247, 0.3);
            --border: #1a1a1a;
            --text: #ffffff;
            --text-dim: #555555;
        }

        body { 
            margin: 0; font-family: 'Courier New', monospace; 
            background: var(--bg); color: var(--text); overflow: hidden;
        }

        /* --- SIDEBAR --- */
        .sidebar {
            position: fixed; left: 0; top: 0; bottom: 0;
            width: 260px; background: #080808;
            border-right: 1px solid var(--border);
            transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1);
            z-index: 100; padding: 20px;
            box-sizing: border-box;
        }
        .sidebar.collapsed { transform: translateX(-240px); }

        .sidebar-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 40px; }
        .status-dot { width: 8px; height: 8px; background: var(--accent); border-radius: 50%; box-shadow: 0 0 12px var(--accent); }
        .status-text { font-size: 10px; letter-spacing: 2px; color: var(--text-dim); }

        #toggle-btn { background: none; border: 1px solid var(--border); color: var(--text-dim); cursor: pointer; padding: 5px 10px; }
        #toggle-btn:hover { color: var(--accent); border-color: var(--accent); }

        .timer-card { background: var(--card); padding: 20px; border: 1px solid var(--border); margin-bottom: 30px; border-radius: 4px; }
        .timer-card label { font-size: 9px; color: var(--text-dim); display: block; margin-bottom: 10px; }
        #timer-display { font-size: 42px; font-weight: bold; margin-bottom: 15px; color: var(--accent); text-shadow: 0 0 10px var(--accent-glow); }

        .timer-inputs { display: flex; gap: 10px; }
        #timer-input { width: 50px; background: #000; border: 1px solid var(--border); color: var(--accent); padding: 5px; outline: none; }
        .timer-inputs button { flex: 1; background: var(--accent); color: #fff; border: none; font-weight: bold; cursor: pointer; }

        .island-list { display: flex; flex-direction: column; gap: 10px; }
        .island-list button { 
            background: none; border: none; color: var(--text-dim); text-align: left; 
            padding: 8px; cursor: pointer; font-family: inherit; font-size: 13px;
            border-left: 2px solid transparent;
        }
        .island-list button.active { color: var(--accent); border-left-color: var(--accent); background: #111; }

        /* --- MAIN VIEWPORT --- */
        .viewport { margin-left: 260px; height: 100vh; transition: margin 0.4s ease; position: relative; }
        .sidebar.collapsed + .viewport { margin-left: 20px; }

        .center-view { 
            display: flex; flex-direction: column; align-items: center; 
            justify-content: center; height: 100%; padding: 0 50px; 
            text-align: center;
        }
        .protocol-header h1 { font-size: 2.5rem; margin: 0; letter-spacing: -1px; }
        .protocol-header p { font-size: 10px; color: var(--text-dim); letter-spacing: 5px; margin-top: 10px; }

        .input-group { 
            display: flex; width: 100%; max-width: 500px; 
            border-bottom: 1px solid var(--border); padding-bottom: 8px; margin-top: 40px;
        }
        .input-group input { flex: 1; background: none; border: none; color: #fff; font-family: inherit; outline: none; font-size: 16px; }
        .input-group button { background: none; border: none; color: var(--accent); cursor: pointer; font-size: 20px; }

        .grid-layout { display: flex; gap: 15px; margin-top: 40px; flex-wrap: wrap; justify-content: center; }
        
        .link-node {
            width: 140px; height: 100px; background: var(--card);
            border: 1px solid var(--border); position: relative;
            cursor: pointer; transition: 0.3s; border-radius: 4px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .link-node:hover { border-color: var(--accent); box-shadow: 0 0 15px var(--accent-glow); transform: translateY(-3px); }
        .link-node span { font-size: 9px; color: var(--text-dim); margin-top: 10px; text-transform: uppercase; letter-spacing: 1px; }
        
        .delete-btn {
            position: absolute; top: 5px; right: 5px; background: none; border: none;
            color: #333; cursor: pointer; font-size: 14px;
        }
        .delete-btn:hover { color: #ff4444; }

        /* Notification Toast */
        #toast {
            position: fixed; bottom: 20px; right: 20px; background: var(--accent);
            color: white; padding: 10px 20px; border-radius: 4px; font-size: 12px;
            display: none; z-index: 1000;
        }
    </style>
</head>
<body>

    <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <span class="status-dot"></span>
            <span class="status-text">PROBRO // PROTOCOL</span>
            <button id="toggle-btn" onclick="toggleSidebar()">[ â€” ]</button>
        </div>
        
        <div class="sidebar-content">
            <div class="timer-card">
                <label>FOCUS_CLOCK</label>
                <div id="timer-display">25:00</div>
                <div class="timer-inputs">
                    <input type="number" id="timer-input" value="25" min="1">
                    <button onclick="toggleTimer()" id="start-btn">ENGAGE</button>
                </div>
            </div>

            <nav class="island-list">
                <label>ACTIVE_VOLUMES</label>
                <button onclick="selectIsland('School')" id="btn-School" class="active">01. SCHOOL</button>
                <button onclick="selectIsland('Work')" id="btn-Work">02. WORK</button>
                <button onclick="selectIsland('Break')" id="btn-Break">03. BREAK</button>
            </nav>
        </div>
    </aside>

    <main class="viewport">
        <section class="center-view">
            <div class="protocol-header">
                <h1 id="island-title">PROBRO // SCHOOL</h1>
                <p>PROTOCOL ACTIVE. LOCK IN.</p>
            </div>

            <div class="input-group">
                <input type="text" id="link-input" placeholder="// PASTE URL TO ADD TO GRID">
                <button onclick="handleAddLink()">+</button>
            </div>

            <div id="links-container" class="grid-layout"></div>
        </section>
    </main>

    <div id="toast"></div>

    <script>
        let currentIsland = 'School';
        let timerInterval = null;
        let timeLeft = 25 * 60;

        // Load data
        let islandData = JSON.parse(localStorage.getItem('probroData')) || {
            'School': ['wikipedia.org', 'khanacademy.org'], 
            'Work': ['github.com', 'notion.so'], 
            'Break': ['youtube.com']
        };

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('collapsed');
        }

        function selectIsland(name) {
            currentIsland = name;
            document.getElementById('island-title').innerText = `PROBRO // ${name.toUpperCase()}`;
            document.querySelectorAll('.island-list button').forEach(btn => {
                btn.classList.toggle('active', btn.id === `btn-${name}`);
            });
            renderLinks();
        }

        function handleAddLink() {
            const input = document.getElementById('link-input');
            let val = input.value.trim();
            if (val) {
                if (!val.startsWith('http')) val = 'https://' + val;
                islandData[currentIsland].push(val);
                localStorage.setItem('probroData', JSON.stringify(islandData));
                renderLinks();
                input.value = '';
                showToast("NODE ADDED TO PROTOCOL");
            }
        }

        function removeLink(e, index) {
            e.stopPropagation();
            islandData[currentIsland].splice(index, 1);
            localStorage.setItem('probroData', JSON.stringify(islandData));
            renderLinks();
        }

        function renderLinks() {
            const container = document.
